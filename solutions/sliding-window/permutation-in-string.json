{
  "questionId": "567",
  "questionSlug": "permutation-in-string",
  "title": "Permutation in String",
  "difficulty": "Medium",
  "resources": {
    "leetcode": "https://leetcode.com/problems/permutation-in-string/",
    "videos": [
      {
        "title": "Permutation in String - Sliding Window",
        "url": "https://www.youtube.com/watch?v=UbyhOgBN834",
        "channel": "NeetCode",
        "duration": "11:30",
        "language": "English"
      }
    ]
  },
  "patternTriggers": "Check if s2 contains permutation of s1 = Fixed window (size s1.length) + frequency matching array.",
  "approaches": [
    {
      "name": "Brute Force (Check All Substrings)",
      "order": 1,
      "intuition": "Generate all substrings of s2 with length equal to s1, check if each is a permutation by sorting or counting.",
      "approach": "For each window of size s1.length in s2, create frequency array and compare with s1's frequency.",
      "steps": [
        "Create frequency array for s1",
        "For i from 0 to s2.length - s1.length:",
        "  Create frequency array for s2[i...i+s1.length-1]",
        "  If both frequency arrays match:",
        "    Return true",
        "Return false"
      ],
      "complexity": {
        "time": "O(n * m * 26)",
        "space": "O(1)",
        "timeExplanation": "O(n-m) windows * O(m) to build each window freq * O(26) to compare",
        "spaceExplanation": "Fixed frequency arrays of size 26"
      },
      "code": {
        "cpp": "class Solution {\npublic:\n    bool matches(int freq1[], int freq2[]) {\n        for (int i = 0; i < 26; i++) {\n            if (freq1[i] != freq2[i]) return false;\n        }\n        return true;\n    }\n    \n    bool checkInclusion(string s1, string s2) {\n        if (s1.length() > s2.length()) return false;\n        \n        int freq1[26] = {0};\n        for (char c : s1) {\n            freq1[c - 'a']++;\n        }\n        \n        int len = s1.length();\n        for (int i = 0; i <= s2.length() - len; i++) {\n            int freq2[26] = {0};\n            for (int j = i; j < i + len; j++) {\n                freq2[s2[j] - 'a']++;\n            }\n            if (matches(freq1, freq2)) {\n                return true;\n            }\n        }\n        \n        return false;\n    }\n};",
        "java": "class Solution {\n    private boolean matches(int[] freq1, int[] freq2) {\n        for (int i = 0; i < 26; i++) {\n            if (freq1[i] != freq2[i]) return false;\n        }\n        return true;\n    }\n    \n    public boolean checkInclusion(String s1, String s2) {\n        if (s1.length() > s2.length()) return false;\n        \n        int[] freq1 = new int[26];\n        for (char c : s1.toCharArray()) {\n            freq1[c - 'a']++;\n        }\n        \n        int len = s1.length();\n        for (int i = 0; i <= s2.length() - len; i++) {\n            int[] freq2 = new int[26];\n            for (int j = i; j < i + len; j++) {\n                freq2[s2.charAt(j) - 'a']++;\n            }\n            if (matches(freq1, freq2)) {\n                return true;\n            }\n        }\n        \n        return false;\n    }\n}",
        "python": "class Solution:\n    def checkInclusion(self, s1: str, s2: str) -> bool:\n        if len(s1) > len(s2):\n            return False\n        \n        freq1 = [0] * 26\n        for c in s1:\n            freq1[ord(c) - ord('a')] += 1\n        \n        length = len(s1)\n        for i in range(len(s2) - length + 1):\n            freq2 = [0] * 26\n            for j in range(i, i + length):\n                freq2[ord(s2[j]) - ord('a')] += 1\n            if freq1 == freq2:\n                return True\n        \n        return False",
        "javascript": "var checkInclusion = function(s1, s2) {\n    if (s1.length > s2.length) return false;\n    \n    const matches = (freq1, freq2) => {\n        for (let i = 0; i < 26; i++) {\n            if (freq1[i] !== freq2[i]) return false;\n        }\n        return true;\n    };\n    \n    const freq1 = new Array(26).fill(0);\n    for (let c of s1) {\n        freq1[c.charCodeAt(0) - 'a'.charCodeAt(0)]++;\n    }\n    \n    const len = s1.length;\n    for (let i = 0; i <= s2.length - len; i++) {\n        const freq2 = new Array(26).fill(0);\n        for (let j = i; j < i + len; j++) {\n            freq2[s2.charCodeAt(j) - 'a'.charCodeAt(0)]++;\n        }\n        if (matches(freq1, freq2)) {\n            return true;\n        }\n    }\n    \n    return false;\n};"
      }
    },
    {
      "name": "Fixed Sliding Window + Frequency Array - Optimal",
      "order": 2,
      "intuition": "Build frequency for s1. Create initial window frequency for s2. Slide window: remove left, add right, compare frequencies.",
      "approach": "Use fixed window of size s1.length, slide through s2, maintain frequency array, check for match at each position.",
      "steps": [
        "Build freq1 for entire s1",
        "Build freq2 for first window in s2 (size = s1.length)",
        "If freq1 == freq2, return true",
        "For i from s1.length to s2.length-1:",
        "  Add s2[i] to freq2",
        "  Remove s2[i - s1.length] from freq2",
        "  If freq1 == freq2, return true",
        "Return false"
      ],
      "complexity": {
        "time": "O(m + n)",
        "space": "O(1)",
        "timeExplanation": "O(m) to build freq1, O(n) to slide through s2, O(26) comparisons = O(m+n)",
        "spaceExplanation": "Two fixed arrays of size 26"
      },
      "code": {
        "cpp": "class Solution {\npublic:\n    bool matches(int freq1[], int freq2[]) {\n        for (int i = 0; i < 26; i++) {\n            if (freq1[i] != freq2[i]) return false;\n        }\n        return true;\n    }\n    \n    bool checkInclusion(string s1, string s2) {\n        if (s1.length() > s2.length()) return false;\n        \n        int freq1[26] = {0};\n        int freq2[26] = {0};\n        \n        // Build frequency for s1\n        for (char c : s1) {\n            freq1[c - 'a']++;\n        }\n        \n        // Build frequency for first window\n        for (int i = 0; i < s1.length(); i++) {\n            freq2[s2[i] - 'a']++;\n        }\n        \n        if (matches(freq1, freq2)) return true;\n        \n        // Slide the window\n        for (int i = s1.length(); i < s2.length(); i++) {\n            freq2[s2[i] - 'a']++;  // Add new right element\n            freq2[s2[i - s1.length()] - 'a']--;  // Remove left element\n            \n            if (matches(freq1, freq2)) return true;\n        }\n        \n        return false;\n    }\n};",
        "java": "class Solution {\n    private boolean matches(int[] freq1, int[] freq2) {\n        for (int i = 0; i < 26; i++) {\n            if (freq1[i] != freq2[i]) return false;\n        }\n        return true;\n    }\n    \n    public boolean checkInclusion(String s1, String s2) {\n        if (s1.length() > s2.length()) return false;\n        \n        int[] freq1 = new int[26];\n        int[] freq2 = new int[26];\n        \n        for (char c : s1.toCharArray()) {\n            freq1[c - 'a']++;\n        }\n        \n        for (int i = 0; i < s1.length(); i++) {\n            freq2[s2.charAt(i) - 'a']++;\n        }\n        \n        if (matches(freq1, freq2)) return true;\n        \n        for (int i = s1.length(); i < s2.length(); i++) {\n            freq2[s2.charAt(i) - 'a']++;\n            freq2[s2.charAt(i - s1.length()) - 'a']--;\n            \n            if (matches(freq1, freq2)) return true;\n        }\n        \n        return false;\n    }\n}",
        "python": "class Solution:\n    def checkInclusion(self, s1: str, s2: str) -> bool:\n        if len(s1) > len(s2):\n            return False\n        \n        freq1 = [0] * 26\n        freq2 = [0] * 26\n        \n        for c in s1:\n            freq1[ord(c) - ord('a')] += 1\n        \n        for i in range(len(s1)):\n            freq2[ord(s2[i]) - ord('a')] += 1\n        \n        if freq1 == freq2:\n            return True\n        \n        for i in range(len(s1), len(s2)):\n            freq2[ord(s2[i]) - ord('a')] += 1\n            freq2[ord(s2[i - len(s1)]) - ord('a')] -= 1\n            \n            if freq1 == freq2:\n                return True\n        \n        return False",
        "javascript": "var checkInclusion = function(s1, s2) {\n    if (s1.length > s2.length) return false;\n    \n    const matches = (freq1, freq2) => {\n        for (let i = 0; i < 26; i++) {\n            if (freq1[i] !== freq2[i]) return false;\n        }\n        return true;\n    };\n    \n    const freq1 = new Array(26).fill(0);\n    const freq2 = new Array(26).fill(0);\n    \n    for (let c of s1) {\n        freq1[c.charCodeAt(0) - 'a'.charCodeAt(0)]++;\n    }\n    \n    for (let i = 0; i < s1.length; i++) {\n        freq2[s2.charCodeAt(i) - 'a'.charCodeAt(0)]++;\n    }\n    \n    if (matches(freq1, freq2)) return true;\n    \n    for (let i = s1.length; i < s2.length; i++) {\n        freq2[s2.charCodeAt(i) - 'a'.charCodeAt(0)]++;\n        freq2[s2.charCodeAt(i - s1.length) - 'a'.charCodeAt(0)]--;\n        \n        if (matches(freq1, freq2)) return true;\n    }\n    \n    return false;\n};"
      }
    }
  ],
  "commonMistakes": [
    "Not handling s1.length > s2.length edge case",
    "Forgetting to check first window before sliding",
    "Not decrementing frequency when removing left element",
    "Rebuilding entire frequency array instead of sliding"
  ],
  "hints": [
    "This is a FIXED size sliding window problem",
    "Window size = s1.length",
    "Use frequency array [26] for lowercase letters",
    "Slide by adding right element and removing left element",
    "Check frequency match at each window position"
  ],
  "followUp": [
    "What if we need to find all starting indices (like Find All Anagrams)?",
    "Handle Unicode characters?",
    "What if s1 and s2 can have different character sets?"
  ],
  "companies": ["Microsoft", "Amazon", "Facebook", "Google"],
  "tags": ["string", "sliding-window", "hash-table", "two-pointers"],
  "relatedProblems": [
    "Find All Anagrams in a String",
    "Minimum Window Substring",
    "Valid Anagram"
  ]
}
